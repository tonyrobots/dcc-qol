<!-- prettier-ignore -->
<div
    class="dccqol chat-card friendly-fire-card"
    data-actor-id="{{actor._id}}"
    {{#if weapon}}data-weapon-id="{{weapon._id}}"{{/if}}
    data-token-id="{{tokenId}}"
    {{#if target}}data-target="{{target}}"{{/if}}
    {{#if targetTokenId}}data-targettoken-id="{{targetTokenId}}"{{/if}}
>

    {{#if noFriendlyFireOccurred}}
    <div class="dccqol-friendlyfire-result status-success">
        {{{d100RollHTML}}} - {{friendlyFireSafeText}}
    </div>
    {{else}}
    <!-- Compact Friendly Fire Message -->
    <div class="dccqol-friendlyfire-result status-failure">
        {{{d100RollHTML}}} - {{struckAllyText}}
    </div>

    <!-- Attack Roll Section -->
    <div class="dccqol-attack-roll-section">
        <div class="attack-roll-label">{{localize "DCC-QOL.FriendlyFireAttackRoll"}}:</div>
        {{{attackRollHTML}}}

        {{#if hit}}
        <!-- Hit - show "failure" and include damage button partial -->
        <div class="dccqol-attack-result status-failure">{{hitText}}</div>
        {{> "modules/dcc-qol/templates/partials/_damage-button.html"}}
        {{else}}
        <!-- Miss - show harmless result, which is a "success" -->
        <div class="dccqol-attack-result status-success">{{missText}}</div>
        {{/if}}
    </div>
    {{/if}}

    <footer class="card-footer centered">
        <span class="tag">{{localize "DCC-QOL.FriendlyFire"}}</span>
        {{#each properties}}
        <span class="tag">{{this}}</span>
        {{/each}}
    </footer>
</div>
