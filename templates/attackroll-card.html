<div
    class="dccqol chat-card"
    data-actor-id="{{actor._id}}"
    data-weapon-id="{{weapon._id}}"
    data-token-id="{{tokenId}}"
    data-target="{{target}}"
    data-targettoken-id="{{targettokenId}}"
    data-options="{{options}}"
>
    <header class="card-header flexrow">
        <!-- <img
            src="{{actor.img}}"
            title="{{actor.name}}"
            width="36"
            height="36"
        /> -->
        <h4 class="weapon-name">
            {{localize "DCC-QOL.AttacksWith" weapon=weapon.name}}
        </h4>
        <!-- if PC, show weapon image;  to do: if NPC, show square version/crop of token image -->
        {{#if isPC}}
        <img
            src="{{weapon.img}}"
            title="{{weapon.name}} (Weapon)"
            width="36"
            height="36"
        />
        {{else}} <img src="{{actor.img}}" title="{{actor.name}} (Actor)"
        width="36" height="36" class="npc-token-image" /* For potential square
        styling */ /> {{/if}}
    </header>

    <!-- <div class="card-content">{{{weapon.system.description.value}}}</div> -->

    {{{diceHTML}}} {{#if deedDieResult}}
    <div
        class="roll-result {{#if deedRollSuccess}}status-success{{else}}status-failure{{/if}}"
    >
        {{localize "DCC.DeedDie"}}: <strong>{{deedDieResult}}</strong>
    </div>
    {{/if}} {{#if isFumble}}
    <div class="chat-details">
        <div class="roll-result status-failure">{{localize "DCC.Fumble"}}</div>
    </div>
    <div class="card-buttons">
        <button data-action="fumble">{{ localize "DCC.RollFumble" }}</button>
    </div>
    {{else}} {{#if hitsTarget}} {{#if isDisplayHitMiss}}
    <div class="chat-details">
        <div class="roll-result status-success">
            <span
                >{{ localize "DCC.Attack" }} {{ localize
                "DCC-QOL.AttackRollHits"}} {{target}}</span
            >
            {{#if deedRollSuccess}} <br />{{localize "DCC-QOL.DeedRollSuccess"}}
            {{/if}}
        </div>
    </div>
    {{/if}}
    <div class="card-buttons">
        <button data-action="damage">{{ localize "DCC.RollDamage" }}</button>
    </div>
    {{else}} {{#if target}} {{#if isDisplayHitMiss}}
    <div class="chat-details">
        <div class="roll-result status-failure">
            {{ tokenName }} {{ localize "DCC-QOL.AttackRollMisses"}} {{target}}
        </div>
    </div>
    {{/if}} {{else}}
    <div class="chat-details">
        <div class="roll-result status-success">
            {{ tokenName }} {{localize "DCC-QOL.AttackRollHitsAC" AC=hitsAc}}
        </div>
    </div>
    <div class="card-buttons">
        <button data-action="damage">{{ localize "DCC.RollDamage" }}</button>
    </div>
    {{/if}} {{/if}} {{/if}} {{#if isCrit}}
    <div class="card-buttons">
        <button data-action="crit">{{ localize "DCC.RollCritical" }}</button>
    </div>
    {{/if}} {{#if showFriendlyFireButton}}
    <div class="card-buttons">
        <button data-action="friendlyFire">
            {{ localize "DCC-QOL.FriendlyFireCheck" }}
        </button>
    </div>
    {{/if}}

    <footer class="card-footer">
        {{#each properties}}
        <span class="tag"> {{this}}</span>
        {{/each}}
    </footer>
</div>
