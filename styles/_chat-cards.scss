/* ---------------------------------------- */
/* DCC-QoL Chat Cards - MINIMAL            */
/* ---------------------------------------- */

/* Base chat card - inherits DCC system styling */
.dccqol.chat-card {
    /* Inherit DCC system styling directly */
    background: transparent;
    border: 1px solid var(--system-border-color);
    color: var(--system-primary-color);
    font-family: var(--dcc-qol-text-font);
    border-radius: 4px;
    padding: 5px;
    margin: 0;
    font-size: 13px;

    /* Header */
    .card-header {
        display: flex;
        align-items: center;
        padding: 3px 0;
        border-bottom: none;

        h3 {
            flex: 1;
            margin: 0;
            line-height: 36px;
            font-size: 14px;
            font-family: var(--dcc-qol-display-font);
            font-weight: bold;
            border-bottom: 0;
            color: var(--system-primary-color);
        }

        img {
            flex: 0 0 36px;
            width: 36px;
            height: 36px;
            margin-left: 5px;
            border-radius: 3px;
            border: none;
        }
    }

    /* Content */
    .card-content {
        padding: 5px 0;
    }

    /* Footer */
    footer {
        border-top: 1px solid var(--system-border-color);
        padding: 5px 0;
        text-align: center;

        .tag {
            display: inline-block;
            background: var(--dcc-qol-ui-bg-light);
            color: var(--dcc-qol-text-muted);
            padding: 2px 5px;
            margin: 2px;
            border-radius: 2px;
            border: 1px solid rgba(0, 0, 0, 0.1);
            font-size: 11px;
            font-weight: normal;
        }
    }

    /* Status classes */
    .status-success {
        color: var(--dcc-qol-status-success);
        font-weight: bold;
    }

    .status-failure {
        color: var(--dcc-qol-status-failure);
        font-weight: bold;
    }

    .status-warning {
        color: var(--dcc-qol-status-warning);
        font-weight: bold;
    }

    .status-info {
        color: var(--dcc-qol-status-info);
        font-weight: bold;
    }

    /* Roll results */
    .roll-result {
        text-align: center;
        margin: 5px 0;
        font-size: 1.1em;
        font-weight: bold;
    }

    /* Attack status styling */
    .attack-status {
        text-align: center;
        margin: 0;
        padding: 5px 3px;

        h3 {
            margin: 0;
            font-size: 14px;

            &.no-target {
                color: var(--dcc-qol-text-muted);
                font-style: italic;
            }
        }
    }

    /* Deed die styling */
    .deed-die {
        padding: 5px;
        margin: 0;
        text-align: center;
        font-size: 13px;
        color: inherit;

        &.deed-normal {
            color: var(--system-primary-color);
        }
    }

    /* Weapon description */
    .weapon-description {
        margin: 5px 0;
        border: 1px solid var(--dcc-qol-ui-border-light);

        summary {
            padding: 3px 5px;
            background: var(--dcc-qol-ui-bg-light);
            cursor: pointer;
            font-weight: bold;
        }

        .description-content {
            padding: 5px;
            font-size: 13px;
        }
    }

    /* Friendly fire warning */
    .friendly-fire-warning {
        margin: 5px 0;
        padding: 5px;
        border: 1px solid var(--dcc-qol-warning-border);

        p.warning {
            margin: 0;
            color: var(--dcc-qol-status-warning);
        }
    }

    /* Debug information dropdown */
    .attack-debug-details {
        margin: 5px 0 0 0;
        border: 1px solid var(--dcc-qol-ui-border-light);
        font-size: 11px;

        summary {
            padding: 2px 5px;
            background: var(--dcc-qol-ui-bg-subtle);
            cursor: pointer;
            color: var(--dcc-qol-text-muted);
        }
    }

    .attack-debug {
        padding: 3px 5px;
        color: var(--dcc-qol-text-muted);

        p {
            margin: 0;
        }
    }

    /* Chat details */
    .chat-details {
        padding: 3px;
    }

    /* Dice styling - overrides for QoL enhancement */
    .dice-total.critical {
        color: var(--dcc-qol-status-success) !important;
    }

    .dice-total.fumble {
        color: var(--dcc-qol-status-failure) !important;
    }

    /* Damage application feedback */
    .dcc-qol-damage-applied {
        color: var(--dcc-qol-status-success);
        font-weight: bold;
        text-align: center;
        margin: 5px 0;
    }

    /* Fumble and crit results */
    .fumble-result,
    .crit-result {
        margin: 5px 0;
        padding: 5px;

        em {
            font-style: italic;
            color: var(--dcc-qol-status-warning);
        }

        table {
            width: 100%;
            margin: 5px 0;

            td {
                padding: 2px 5px;
                border-bottom: 1px solid var(--dcc-qol-table-border);
            }
        }
    }

    /* Friendly fire specific components */
    .dccqol-friendlyfire-result {
        margin: 5px 0;
        padding: 5px;
        text-align: center;
    }

    /* Attack/Damage roll sections */
    .dccqol-attack-roll-section,
    .dccqol-attack-result,
    .dccqol-damage-result {
        margin: 5px 0;
        padding: 3px;

        .attack-roll-label {
            font-weight: bold;
            font-family: var(--dcc-qol-display-font);
            margin-bottom: 3px;
        }
    }
}

/* Compact variant */
.dccqol.chat-card.compact {
    padding: 3px;

    .card-header {
        padding: 2px 0;
        margin-bottom: 2px;

        img {
            flex: 0 0 24px;
            width: 24px;
            height: 24px;
            margin-right: 3px;
        }

        h3 {
            line-height: 24px;
            margin: 0;
        }
    }

    .compact-dice-section {
        padding: 3px 0;
        font-size: 13px;
        color: var(--system-primary-color);
        font-weight: normal;

        &.centered {
            text-align: center;
        }

        .dice-roll {
            display: inline-block;
            margin: 0 3px;
        }

        .dice-formula {
            font-size: 12px;
        }

        .dice-total {
            font-size: 13px;
            font-weight: bold;
        }

        strong {
            font-weight: bold;
            color: var(--system-primary-color);
        }
    }

    .compact-result {
        padding: 3px 0;

        .roll-result {
            margin: 3px 0;
            font-size: 1em;
        }
    }

    .compact-deed-result {
        text-align: center;
        margin: 3px 0;
        font-size: 12px;
    }

    .compact-buttons-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
        gap: 3px;
        margin-top: 3px;

        &:has(> :only-child) {
            grid-template-columns: 1fr;

            > :only-child {
                justify-self: center;
                max-width: 200px;
            }
        }
    }

    .compact-damage-result,
    .compact-auto-result {
        display: inline-block;
        margin: 3px;
        padding: 2px 5px;
        font-size: 12px;
        font-weight: bold;
    }
}

/* Friendly fire card */
.dccqol.friendly-fire-card {
    border-left: 4px solid #ffc107;
}

/* Attack result indicators */
.dccqol.chat-card.attack-hit {
    border-left: 4px solid var(--dcc-qol-status-success);
}

.dccqol.chat-card.attack-miss {
    border-left: 4px solid var(--dcc-qol-status-failure);
}

/* ---------------------------------------- */
/* Standalone Components & System Cards     */
/* ---------------------------------------- */

/* System card font overrides */
.dccqol-system-card-font .message-content {
    font-family: var(--dcc-qol-text-font);
    font-size: 13px;
}
